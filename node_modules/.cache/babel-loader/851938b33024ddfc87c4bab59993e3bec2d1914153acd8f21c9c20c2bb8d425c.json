{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{CheckCircle,Package,Clock,User,MapPin,Phone,AlertCircle}from'lucide-react';import'../styles/RestaurantConfirmation.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RestaurantConfirmation=()=>{const{orderData}=useParams();const navigate=useNavigate();const[pedidoData,setPedidoData]=useState(null);const[loading,setLoading]=useState(true);const[entregado,setEntregado]=useState(false);useEffect(()=>{// Decodificar los datos del pedido\ntry{const decodedData=JSON.parse(decodeURIComponent(orderData));setPedidoData(decodedData);setLoading(false);}catch(error){console.error('Error decodificando datos del pedido:',error);// Datos de ejemplo si hay error\nsetPedidoData({tipo:\"CONFIRMACION_PEDIDO\",pedido:\"demo-1\",comercio:\"Café Central\",codigo:\"A3X9K2\",total:\"$18.000 COP\",fecha:\"23/09/2025, 12:35\",estado:\"LISTO_PARA_RECOGER\",cliente:\"Cliente TuGood TuGo\",confirmado:new Date().toISOString()});setLoading(false);}},[orderData]);const handleConfirmarEntrega=async()=>{try{// Enviar confirmación al backend\nconst response=await fetch('/api/pedidos/confirmar-entrega',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({pedidoId:pedidoData.pedido,codigoSeguridad:pedidoData.codigo,comercio:pedidoData.comercio,fechaEntrega:new Date().toISOString()})});if(response.ok){setEntregado(true);// Redirigir después de 3 segundos\nsetTimeout(()=>{window.close();// Cerrar la ventana si es posible\n},3000);}else{alert('Error al confirmar la entrega. Inténtalo de nuevo.');}}catch(error){console.error('Error:',error);// Mostrar éxito de todas formas para demo\nsetEntregado(true);setTimeout(()=>{window.close();},3000);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Verificando pedido...\"})]})});}if(entregado){return/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"success-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"success-icon\",children:/*#__PURE__*/_jsx(CheckCircle,{size:80})}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\xA1Pedido Entregado!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"El pedido #\",pedidoData.pedido,\" ha sido marcado como entregado exitosamente.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"success-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Hora de entrega:\"}),\" \",new Date().toLocaleString('es-CO')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Cliente:\"}),\" \",pedidoData.cliente]})]})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-icon\",children:/*#__PURE__*/_jsx(Package,{size:32})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Confirmaci\\xF3n de Pedido\"}),/*#__PURE__*/_jsx(\"p\",{children:\"TuGood TuGo - Panel Restaurante\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-badge\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Pedido Verificado\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pedido-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pedido-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Pedido #\",pedidoData.pedido]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pedido-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-indicator\"}),pedidoData.estado.replace('_',' ')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pedido-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-icon\",children:/*#__PURE__*/_jsx(User,{size:18})}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Cliente\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:pedidoData.cliente})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-icon\",children:/*#__PURE__*/_jsx(Package,{size:18})}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"C\\xF3digo de Seguridad\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value security-code\",children:pedidoData.codigo})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-icon\",children:/*#__PURE__*/_jsx(Clock,{size:18})}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Hora de Recogida\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:pedidoData.fecha})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-icon\",children:/*#__PURE__*/_jsx(MapPin,{size:18})}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Comercio\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:pedidoData.comercio})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"total-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"total-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total del Pedido\"}),/*#__PURE__*/_jsx(\"span\",{className:\"total-amount\",children:pedidoData.total})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instructions-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"instructions-header\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:20}),/*#__PURE__*/_jsx(\"h3\",{children:\"Instrucciones de Entrega\"})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"instructions-list\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2705 Verificar que el c\\xF3digo de seguridad coincida\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2705 Confirmar la identidad del cliente\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2705 Entregar el pedido completo\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2705 Marcar como entregado en el sistema\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"action-section\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"confirm-delivery-btn\",onClick:handleConfirmarEntrega,children:[/*#__PURE__*/_jsx(CheckCircle,{size:20}),\"Confirmar Entrega del Pedido\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Escaneado: \",new Date().toLocaleString('es-CO')]}),/*#__PURE__*/_jsx(\"p\",{children:\"Sistema TuGood TuGo v1.0\"})]})]})});};export default RestaurantConfirmation;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}