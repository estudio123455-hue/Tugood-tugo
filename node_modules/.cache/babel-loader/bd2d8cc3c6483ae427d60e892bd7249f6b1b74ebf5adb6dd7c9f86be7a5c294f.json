{"ast":null,"code":"import React,{useState,useEffect}from'react';import{MapPin,Navigation,Zap}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const InteractiveMap=_ref=>{let{comercios=[],selectedComercio,onComercioSelect,userLocation}=_ref;const[mapCenter,setMapCenter]=useState({lat:4.6097,lng:-74.0817});// Bogotá\nconst[zoom,setZoom]=useState(13);// Actualizar centro del mapa basado en la ubicación del usuario\nuseEffect(()=>{if(userLocation&&userLocation.coords){setMapCenter({lat:userLocation.coords.lat,lng:userLocation.coords.lng});setZoom(15);}},[userLocation]);// Función para calcular distancia aproximada\nconst calculateDistance=(lat1,lng1,lat2,lng2)=>{const R=6371;// Radio de la Tierra en km\nconst dLat=(lat2-lat1)*Math.PI/180;const dLng=(lng2-lng1)*Math.PI/180;const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLng/2)*Math.sin(dLng/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return(R*c).toFixed(1);};// Función para obtener color por tipo de comercio\nconst getComercioColor=tipo=>{const colors={'Panadería':'#ff6b35','Comida Casera':'#4caf50','Pizza':'#f44336','Cafetería':'#795548','default':'#9e9e9e'};return colors[tipo]||colors.default;};return/*#__PURE__*/_jsxs(\"div\",{className:\"interactive-map\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"map-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"map-title\",children:[/*#__PURE__*/_jsx(MapPin,{size:20,className:\"text-primary-600\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Comercios cerca de ti\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"comercios-count\",children:[comercios.length,\" comercios\"]}),userLocation&&/*#__PURE__*/_jsxs(\"span\",{className:\"user-location\",children:[/*#__PURE__*/_jsx(Navigation,{size:14}),\"Tu ubicaci\\xF3n\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"map-background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"map-grid\",children:Array.from({length:20},(_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"grid-line\"},i))}),userLocation&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-marker\",style:{left:'50%',top:'50%',transform:'translate(-50%, -50%)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-marker-pulse\"}),/*#__PURE__*/_jsx(Navigation,{size:16,className:\"user-icon\"})]}),comercios.map((comercio,index)=>{var _comercio$coords,_comercio$coords2;const distance=userLocation?calculateDistance(userLocation.coords.lat,userLocation.coords.lng,((_comercio$coords=comercio.coords)===null||_comercio$coords===void 0?void 0:_comercio$coords.lat)||4.6097,((_comercio$coords2=comercio.coords)===null||_comercio$coords2===void 0?void 0:_comercio$coords2.lng)||-74.0817):'0.5';// Posición relativa basada en el índice (simulada)\nconst positions=[{left:'30%',top:'25%'},{left:'70%',top:'35%'},{left:'45%',top:'70%'},{left:'25%',top:'60%'},{left:'80%',top:'20%'}];const position=positions[index%positions.length];return/*#__PURE__*/_jsxs(\"div\",{className:\"comercio-marker \".concat((selectedComercio===null||selectedComercio===void 0?void 0:selectedComercio.id)===comercio.id?'selected':''),style:{left:position.left,top:position.top,'--marker-color':getComercioColor(comercio.type)},onClick:()=>onComercioSelect&&onComercioSelect(comercio),children:[/*#__PURE__*/_jsx(\"div\",{className:\"marker-pin\",children:/*#__PURE__*/_jsx(MapPin,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{className:\"marker-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"marker-name\",children:comercio.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"marker-distance\",children:[distance,\" km\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"marker-type\",children:comercio.type})]})]},comercio.id);})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comercios-list\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Comercios disponibles\"}),/*#__PURE__*/_jsx(\"div\",{className:\"comercios-grid\",children:comercios.map(comercio=>{var _comercio$coords3,_comercio$coords4;const distance=userLocation?calculateDistance(userLocation.coords.lat,userLocation.coords.lng,((_comercio$coords3=comercio.coords)===null||_comercio$coords3===void 0?void 0:_comercio$coords3.lat)||4.6097,((_comercio$coords4=comercio.coords)===null||_comercio$coords4===void 0?void 0:_comercio$coords4.lng)||-74.0817):'0.5';return/*#__PURE__*/_jsxs(\"div\",{className:\"comercio-card \".concat((selectedComercio===null||selectedComercio===void 0?void 0:selectedComercio.id)===comercio.id?'selected':''),onClick:()=>onComercioSelect&&onComercioSelect(comercio),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comercio-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comercio-marker-mini\",style:{backgroundColor:getComercioColor(comercio.type)},children:/*#__PURE__*/_jsx(MapPin,{size:12})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comercio-info\",children:[/*#__PURE__*/_jsx(\"h5\",{children:comercio.name}),/*#__PURE__*/_jsx(\"span\",{className:\"comercio-type\",children:comercio.type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comercio-distance\",children:[/*#__PURE__*/_jsx(Zap,{size:12}),distance,\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comercio-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"comercio-address\",children:comercio.direccion||'Bogotá, Colombia'}),/*#__PURE__*/_jsxs(\"span\",{className:\"comercio-items\",children:[comercio.itemsAvailable,\" disponibles\"]})]})]},comercio.id);})})]})]});};export default InteractiveMap;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}