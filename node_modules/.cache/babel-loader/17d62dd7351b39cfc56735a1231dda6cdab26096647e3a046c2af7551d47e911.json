{"ast":null,"code":"import _objectSpread from\"C:/Users/PERSONAL/Downloads/tugood tugo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Email Service - Sistema de Confirmaci√≥n por Correo\n// Usa EmailJS para env√≠o de emails sin backend\nimport emailjs from'@emailjs/browser';// Configuraci√≥n de EmailJS (usar variables de entorno en producci√≥n)\nconst EMAIL_CONFIG={serviceId:'service_gc48bhw',// Service ID de EmailJS configurado\ntemplateIds:{registration:'template_registro',// Template para registro\nlogin:'template_login',// Template para login\notp:'template_otp'// Template para c√≥digos OTP\n},publicKey:'ZWvRswM9WLDo6u4Z9'// Public Key de EmailJS configurado\n};/**\n * Inicializa EmailJS con la clave p√∫blica\n */const initEmailJS=()=>{try{emailjs.init(EMAIL_CONFIG.publicKey);console.log('üìß EmailJS inicializado correctamente');}catch(error){console.error('‚ùå Error inicializando EmailJS:',error);}};/**\n * Genera un c√≥digo de confirmaci√≥n de 6 d√≠gitos\n * @returns {string} C√≥digo de confirmaci√≥n\n */const generateConfirmationCode=()=>{return Math.floor(100000+Math.random()*900000).toString();};/**\n * Obtiene informaci√≥n del dispositivo y ubicaci√≥n\n * @returns {Object} Informaci√≥n del dispositivo\n */const getDeviceInfo=()=>{const userAgent=navigator.userAgent;let deviceType='Desconocido';let browser='Desconocido';// Detectar tipo de dispositivo\nif(/Mobile|Android|iPhone|iPad/.test(userAgent)){deviceType='M√≥vil';}else if(/Tablet/.test(userAgent)){deviceType='Tablet';}else{deviceType='Computadora';}// Detectar navegador\nif(userAgent.includes('Chrome'))browser='Chrome';else if(userAgent.includes('Firefox'))browser='Firefox';else if(userAgent.includes('Safari'))browser='Safari';else if(userAgent.includes('Edge'))browser='Edge';return{deviceType,browser,timestamp:new Date().toLocaleString('es-CO',{timeZone:'America/Bogota',year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'}),ip:'Bogot√°, Colombia'// En producci√≥n, usar servicio de geolocalizaci√≥n\n};};/**\n * Env√≠a email de confirmaci√≥n de registro\n * @param {Object} userData - Datos del usuario registrado\n * @returns {Promise<boolean>} True si el email se envi√≥ correctamente\n */const sendRegistrationConfirmation=async userData=>{try{const confirmationCode=generateConfirmationCode();const deviceInfo=getDeviceInfo();// Guardar c√≥digo en localStorage para verificaci√≥n\nlocalStorage.setItem(\"confirmation_\".concat(userData.email),confirmationCode);// Mostrar c√≥digo directamente al usuario\nalert(\"C\\xF3digo de verificaci\\xF3n\\n\\nTu c\\xF3digo es: \".concat(confirmationCode,\"\\n\\nIngresa este c\\xF3digo en la siguiente pantalla para completar tu registro.\"));return{success:true,email:userData.email,code:confirmationCode,type:'registration'};}catch(error){console.error('Error enviando email de registro:',error);// Fallback en caso de error\nconst fallbackCode=generateConfirmationCode();localStorage.setItem(\"confirmation_\".concat(userData.email),fallbackCode);alert(\"C\\xF3digo de verificaci\\xF3n\\n\\nTu c\\xF3digo es: \".concat(fallbackCode,\"\\n\\nIngresa este c\\xF3digo en la siguiente pantalla.\"));return{success:false,email:userData.email,code:fallbackCode,type:'registration',error:'Fallback code generated'};}};/**\n * Env√≠a email de confirmaci√≥n de inicio de sesi√≥n\n * @param {Object} userData - Datos del usuario que inici√≥ sesi√≥n\n * @returns {Promise<boolean>} True si el email se envi√≥ correctamente\n */export const sendLoginConfirmation=async userData=>{try{const confirmationCode=generateConfirmationCode();const deviceInfo=getDeviceInfo();// Guardar c√≥digo en localStorage para verificaci√≥n\nlocalStorage.setItem(\"login_confirmation_\".concat(userData.email),confirmationCode);// Mostrar c√≥digo directamente al usuario\nalert(\"\\uD83D\\uDD10 C\\xF3digo de verificaci\\xF3n de acceso\\n\\n\\uD83D\\uDD10 Tu c\\xF3digo es: \".concat(confirmationCode,\"\\n\\n\\u2705 Ingresa este c\\xF3digo en la siguiente pantalla para confirmar tu acceso.\"));return{success:true,email:userData.email,code:confirmationCode,type:'login'};}catch(error){console.error('‚ùå Error enviando email de login:',error);// Fallback en caso de error\nconst fallbackCode=generateConfirmationCode();localStorage.setItem(\"login_confirmation_\".concat(userData.email),fallbackCode);alert(\"\\uD83D\\uDD10 C\\xF3digo de verificaci\\xF3n\\n\\n\\uD83D\\uDD10 Tu c\\xF3digo es: \".concat(fallbackCode,\"\\n\\n\\u2705 Ingresa este c\\xF3digo en la siguiente pantalla.\"));return{success:false,email:userData.email,code:fallbackCode,type:'login',error:'Fallback code generated'};}};/**\n * Verifica un c√≥digo de confirmaci√≥n\n * @param {string} email - Email del usuario\n * @param {string} code - C√≥digo a verificar\n * @param {string} type - Tipo de confirmaci√≥n ('registration' o 'login')\n * @returns {boolean} True si el c√≥digo es v√°lido\n */export const verifyConfirmationCode=function(email,code){let type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'registration';try{const storageKey=type==='registration'?\"confirmation_\".concat(email):\"login_confirmation_\".concat(email);const storedCode=localStorage.getItem(storageKey);if(storedCode===code){// Limpiar c√≥digo despu√©s de verificaci√≥n exitosa\nlocalStorage.removeItem(storageKey);return true;}return false;}catch(error){console.error('‚ùå Error verificando c√≥digo:',error);return false;}};/**\n * Env√≠a email de bienvenida despu√©s de confirmaci√≥n\n * @param {Object} userData - Datos del usuario\n * @returns {Promise<boolean>} True si el email se envi√≥ correctamente\n */export const sendWelcomeEmail=async userData=>{try{const templateParams={to_name:userData.nombre,to_email:userData.email,user_name:userData.nombre,app_name:'TuGood TuGo',app_url:'https://tugood-tugo.vercel.app',features:['Encuentra ofertas incre√≠bles en comercios locales','Ayuda a reducir el desperdicio de alimentos','Ahorra dinero en tus compras diarias','Contribuye al cuidado del medio ambiente'].join('\\n‚Ä¢ '),support_email:'soporte@tugoodtugo.com'};console.log('üìß Simulando env√≠o de email de bienvenida:',templateParams);// En producci√≥n, usar template de bienvenida\n// await emailjs.send(EMAIL_CONFIG.serviceId, 'template_welcome', templateParams);\nreturn true;}catch(error){console.error('‚ùå Error enviando email de bienvenida:',error);return false;}};/**\n * Configuraci√≥n para producci√≥n\n * Llamar esta funci√≥n con las credenciales reales de EmailJS\n */export const configureEmailService=(serviceId,publicKey,templateIds)=>{EMAIL_CONFIG.serviceId=serviceId;EMAIL_CONFIG.publicKey=publicKey;EMAIL_CONFIG.templateIds=_objectSpread(_objectSpread({},EMAIL_CONFIG.templateIds),templateIds);initEmailJS();};/**\n * Env√≠a un c√≥digo OTP por correo electr√≥nico\n * @param {string} email - Direcci√≥n de correo del destinatario\n * @param {string} otp - C√≥digo OTP a enviar\n * @returns {Promise<boolean>} True si el correo se envi√≥ correctamente\n */const sendOTPEmail=async(email,otp)=>{try{const templateParams={to_email:email,otp_code:otp,expiration_minutes:10,// Tiempo de expiraci√≥n en minutos\napp_name:'TuGood TuGo'};// Usar el template de OTP\nawait emailjs.send(EMAIL_CONFIG.serviceId,'template_otp',// Aseg√∫rate de crear este template en EmailJS\ntemplateParams,EMAIL_CONFIG.publicKey);console.log(\"OTP enviado a \".concat(email));return true;}catch(error){console.error('Error enviando OTP por correo:',error);throw new Error('No se pudo enviar el c√≥digo de verificaci√≥n');}};// Inicializar EmailJS al cargar el m√≥dulo\ninitEmailJS();// Exportar configuraci√≥n para uso en otros m√≥dulos\nexport{EMAIL_CONFIG};// Templates de ejemplo para EmailJS\nexport const EMAIL_TEMPLATES={registration:{subject:'üéâ ¬°Bienvenido a TuGood TuGo! - Confirma tu registro',html:\"\\n      <div style=\\\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa; padding: 20px;\\\">\\n        <div style=\\\"background: linear-gradient(135deg, #f59e0b, #d97706); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;\\\">\\n          <h1 style=\\\"color: white; margin: 0; font-size: 28px;\\\">\\uD83D\\uDED2 TuGood TuGo</h1>\\n          <p style=\\\"color: white; margin: 10px 0 0 0; font-size: 16px;\\\">\\xA1Bienvenido a la revoluci\\xF3n contra el desperdicio!</p>\\n        </div>\\n        \\n        <div style=\\\"background: white; padding: 30px; border-radius: 0 0 10px 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);\\\">\\n          <h2 style=\\\"color: #1f2937; margin-bottom: 20px;\\\">\\xA1Hola {{user_name}}! \\uD83D\\uDC4B</h2>\\n          \\n          <p style=\\\"color: #4b5563; line-height: 1.6; margin-bottom: 20px;\\\">\\n            \\xA1Gracias por registrarte en TuGood TuGo! Tu cuenta como <strong>{{user_type}}</strong> ha sido creada exitosamente.\\n          </p>\\n          \\n          <div style=\\\"background: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: center;\\\">\\n            <h3 style=\\\"color: #1f2937; margin-bottom: 10px;\\\">\\uD83D\\uDD10 C\\xF3digo de Confirmaci\\xF3n</h3>\\n            <div style=\\\"font-size: 32px; font-weight: bold; color: #d97706; letter-spacing: 4px; font-family: monospace;\\\">\\n              {{confirmation_code}}\\n            </div>\\n          </div>\\n          \\n          <div style=\\\"background: #ecfdf5; border-left: 4px solid #10b981; padding: 15px; margin: 20px 0;\\\">\\n            <h4 style=\\\"color: #065f46; margin: 0 0 10px 0;\\\">\\uD83D\\uDCCB Detalles del Registro:</h4>\\n            <p style=\\\"margin: 5px 0; color: #047857;\\\"><strong>Email:</strong> {{user_email}}</p>\\n            <p style=\\\"margin: 5px 0; color: #047857;\\\"><strong>Fecha:</strong> {{timestamp}}</p>\\n            <p style=\\\"margin: 5px 0; color: #047857;\\\"><strong>Dispositivo:</strong> {{device_type}} ({{browser}})</p>\\n            <p style=\\\"margin: 5px 0; color: #047857;\\\"><strong>Ubicaci\\xF3n:</strong> {{location}}</p>\\n          </div>\\n          \\n          <div style=\\\"text-align: center; margin: 30px 0;\\\">\\n            <a href=\\\"https://tugood-tugo.vercel.app\\\" style=\\\"background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block;\\\">\\n              \\uD83D\\uDE80 Comenzar a Explorar\\n            </a>\\n          </div>\\n          \\n          <div style=\\\"border-top: 1px solid #e5e7eb; padding-top: 20px; margin-top: 30px;\\\">\\n            <p style=\\\"color: #6b7280; font-size: 14px; text-align: center;\\\">\\n              Si tienes alguna pregunta, cont\\xE1ctanos en <a href=\\\"mailto:{{support_email}}\\\" style=\\\"color: #d97706;\\\">{{support_email}}</a>\\n            </p>\\n          </div>\\n        </div>\\n      </div>\\n    \"},login:{subject:'üîê Confirmaci√≥n de Inicio de Sesi√≥n - TuGood TuGo',html:\"\\n      <div style=\\\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa; padding: 20px;\\\">\\n        <div style=\\\"background: linear-gradient(135deg, #3b82f6, #1d4ed8); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;\\\">\\n          <h1 style=\\\"color: white; margin: 0; font-size: 28px;\\\">\\uD83D\\uDED2 TuGood TuGo</h1>\\n          <p style=\\\"color: white; margin: 10px 0 0 0; font-size: 16px;\\\">Confirmaci\\xF3n de Acceso</p>\\n        </div>\\n        \\n        <div style=\\\"background: white; padding: 30px; border-radius: 0 0 10px 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);\\\">\\n          <h2 style=\\\"color: #1f2937; margin-bottom: 20px;\\\">\\xA1Hola {{user_name}}! \\uD83D\\uDC4B</h2>\\n          \\n          <p style=\\\"color: #4b5563; line-height: 1.6; margin-bottom: 20px;\\\">\\n            Hemos detectado un nuevo inicio de sesi\\xF3n en tu cuenta de TuGood TuGo.\\n          </p>\\n          \\n          <div style=\\\"background: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: center;\\\">\\n            <h3 style=\\\"color: #1f2937; margin-bottom: 10px;\\\">\\uD83D\\uDD10 C\\xF3digo de Confirmaci\\xF3n</h3>\\n            <div style=\\\"font-size: 32px; font-weight: bold; color: #1d4ed8; letter-spacing: 4px; font-family: monospace;\\\">\\n              {{confirmation_code}}\\n            </div>\\n          </div>\\n          \\n          <div style=\\\"background: #eff6ff; border-left: 4px solid #3b82f6; padding: 15px; margin: 20px 0;\\\">\\n            <h4 style=\\\"color: #1e40af; margin: 0 0 10px 0;\\\">\\uD83D\\uDCCB Detalles del Acceso:</h4>\\n            <p style=\\\"margin: 5px 0; color: #1e3a8a;\\\"><strong>Email:</strong> {{user_email}}</p>\\n            <p style=\\\"margin: 5px 0; color: #1e3a8a;\\\"><strong>Fecha y Hora:</strong> {{timestamp}}</p>\\n            <p style=\\\"margin: 5px 0; color: #1e3a8a;\\\"><strong>Dispositivo:</strong> {{device_type}} ({{browser}})</p>\\n            <p style=\\\"margin: 5px 0; color: #1e3a8a;\\\"><strong>Ubicaci\\xF3n:</strong> {{location}}</p>\\n          </div>\\n          \\n          <div style=\\\"background: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px; margin: 20px 0;\\\">\\n            <h4 style=\\\"color: #92400e; margin: 0 0 10px 0;\\\">\\u26A0\\uFE0F Importante:</h4>\\n            <p style=\\\"margin: 0; color: #a16207;\\\">{{security_tip}}</p>\\n          </div>\\n          \\n          <div style=\\\"text-align: center; margin: 30px 0;\\\">\\n            <a href=\\\"https://tugood-tugo.vercel.app/profile\\\" style=\\\"background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block;\\\">\\n              \\uD83D\\uDC64 Ver Mi Perfil\\n            </a>\\n          </div>\\n          \\n          <div style=\\\"border-top: 1px solid #e5e7eb; padding-top: 20px; margin-top: 30px;\\\">\\n            <p style=\\\"color: #6b7280; font-size: 14px; text-align: center;\\\">\\n              Si tienes alguna pregunta, cont\\xE1ctanos en <a href=\\\"mailto:{{support_email}}\\\" style=\\\"color: #3b82f6;\\\">{{support_email}}</a>\\n            </p>\\n          </div>\\n        </div>\\n      </div>\\n    \"}};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}