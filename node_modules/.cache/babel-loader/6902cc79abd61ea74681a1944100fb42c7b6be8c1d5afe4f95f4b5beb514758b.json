{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PERSONAL\\\\Downloads\\\\tugood tugo\\\\src\\\\pages\\\\MainScreen.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Search, Filter, MapPin, Clock, Euro, Star, Map, List, User, ShoppingCart, Package, Home, Settings } from 'lucide-react';\nimport BusinessCard from '../components/BusinessCard';\nimport FilterPanel from '../components/FilterPanel';\nimport MapView from '../components/MapView';\nimport InteractiveMap from '../components/InteractiveMap';\nimport LocationPermissionRequest from '../components/LocationPermissionRequest';\nimport useGeolocation from '../hooks/useGeolocation';\nimport { comerciosAPI, packsAPI, authAPI } from '../services/api';\nimport { mockApiService } from '../services/mockApi';\nimport '../styles/MainScreen.css';\nimport '../styles/InteractiveMap.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MainScreen = ({\n  user,\n  city,\n  onLogout\n}) => {\n  _s();\n  const navigate = useNavigate();\n\n  // Debug: verificar usuario\n  console.log('MainScreen - Usuario recibido:', user);\n  console.log('MainScreen - Tipo de usuario:', user === null || user === void 0 ? void 0 : user.tipo);\n  const [viewMode, setViewMode] = useState('list'); // 'list' or 'map'\n  const [showFilters, setShowFilters] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filters, setFilters] = useState({\n    foodType: 'all',\n    maxPrice: 50,\n    maxDistance: 5,\n    openNow: false\n  });\n\n  // State for businesses and packs data\n  const [businesses, setBusinesses] = useState([]);\n  const [packs, setPacks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [filteredBusinesses, setFilteredBusinesses] = useState([]);\n  const [selectedComercio, setSelectedComercio] = useState(null);\n  const [userLocation, setUserLocation] = useState(null);\n  const [showLocationRequest, setShowLocationRequest] = useState(false);\n  const [locationRequested, setLocationRequested] = useState(false);\n\n  // Hook de geolocalización\n  const {\n    loading: locationLoading,\n    error: locationError,\n    position,\n    permissionStatus,\n    getLocationWithRetry\n  } = useGeolocation();\n\n  // Load data from API\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Load comercios and packs using mock API directly\n        const [comerciosResponse, packsResponse] = await Promise.all([mockApiService.getComercios({\n          limit: 50\n        }), mockApiService.getPacks({\n          limit: 50\n        })]);\n\n        // Transform comercios data to match expected format\n        const transformedBusinesses = comerciosResponse.comercios.map(comercio => {\n          var _comercio$packs;\n          return {\n            id: comercio.id,\n            name: comercio.nombre,\n            type: comercio.tipo_comida,\n            rating: comercio.calificacion || 4.5,\n            distance: 0.5,\n            originalPrice: 15000,\n            discountPrice: 8000,\n            itemsAvailable: ((_comercio$packs = comercio.packs) === null || _comercio$packs === void 0 ? void 0 : _comercio$packs.length) || 2,\n            closingTime: comercio.horario.split(' - ')[1] || '22:00',\n            image: comercio.imagen || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=300&h=200&fit=crop',\n            coords: comercio.coordenadas || {\n              lat: 4.6351,\n              lng: -74.0669\n            },\n            description: comercio.descripcion || 'Comercio local',\n            direccion: comercio.direccion,\n            zona: comercio.zona,\n            telefono: comercio.telefono,\n            tiempo_entrega: comercio.tiempo_entrega,\n            costo_envio: comercio.costo_envio,\n            activo: comercio.activo\n          };\n        });\n        setBusinesses(transformedBusinesses);\n        setPacks(packsResponse.packs || []);\n      } catch (err) {\n        console.error('Error loading data:', err);\n        // Cargar datos de fallback si hay error\n        try {\n          const fallbackData = await mockApiService.getComercios();\n          const transformedBusinesses = fallbackData.comercios.map(comercio => {\n            var _comercio$packs2;\n            return {\n              id: comercio.id,\n              name: comercio.nombre,\n              type: comercio.tipo_comida,\n              rating: comercio.calificacion || 4.5,\n              distance: 0.5,\n              originalPrice: 15000,\n              discountPrice: 8000,\n              itemsAvailable: ((_comercio$packs2 = comercio.packs) === null || _comercio$packs2 === void 0 ? void 0 : _comercio$packs2.length) || 2,\n              closingTime: '22:00',\n              image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=300&h=200&fit=crop',\n              coords: comercio.coordenadas || {\n                lat: 4.6351,\n                lng: -74.0669\n              },\n              description: comercio.descripcion,\n              direccion: comercio.direccion,\n              zona: comercio.zona,\n              telefono: comercio.telefono,\n              tiempo_entrega: comercio.tiempo_entrega,\n              costo_envio: comercio.costo_envio,\n              activo: comercio.activo\n            };\n          });\n          setBusinesses(transformedBusinesses);\n          const packsData = await mockApiService.getPacks();\n          setPacks(packsData.packs || []);\n          setError(null); // Limpiar error si el fallback funciona\n        } catch (fallbackErr) {\n          console.error('Error with fallback data:', fallbackErr);\n          setError('Error cargando datos. Intenta nuevamente.');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, []);\n\n  // Manejar geolocalización mejorada\n  useEffect(() => {\n    const initializeLocation = async () => {\n      // Si ya tenemos una ubicación, no hacer nada\n      if (userLocation) return;\n\n      // Verificar si ya se denegaron los permisos\n      if (permissionStatus === 'denied') {\n        setUserLocation({\n          coords: {\n            lat: 4.6097,\n            lng: -74.0817\n          },\n          name: (city === null || city === void 0 ? void 0 : city.name) || 'Bogotá (ubicación por defecto)'\n        });\n        return;\n      }\n\n      // Si los permisos están concedidos, obtener ubicación\n      if (permissionStatus === 'granted') {\n        try {\n          const position = await getLocationWithRetry();\n          setUserLocation({\n            coords: {\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            },\n            name: (city === null || city === void 0 ? void 0 : city.name) || 'Tu ubicación'\n          });\n        } catch (error) {\n          console.warn('Error getting location:', error);\n          setUserLocation({\n            coords: {\n              lat: 4.6097,\n              lng: -74.0817\n            },\n            name: (city === null || city === void 0 ? void 0 : city.name) || 'Bogotá (ubicación por defecto)'\n          });\n        }\n      } else if (permissionStatus === 'prompt' && !locationRequested) {\n        // Mostrar modal para solicitar permisos solo una vez\n        setShowLocationRequest(true);\n        setLocationRequested(true);\n      }\n    };\n    initializeLocation();\n  }, [permissionStatus, city, userLocation, getLocationWithRetry]);\n\n  // Filter businesses based on search and filters\n  useEffect(() => {\n    // Only filter if we have businesses data\n    if (businesses.length === 0) {\n      setFilteredBusinesses([]);\n      return;\n    }\n    let filtered = businesses;\n\n    // Apply search filter\n    if (searchTerm.trim()) {\n      filtered = filtered.filter(business => business.name.toLowerCase().includes(searchTerm.toLowerCase()) || business.type.toLowerCase().includes(searchTerm.toLowerCase()) || business.description && business.description.toLowerCase().includes(searchTerm.toLowerCase()));\n    }\n\n    // Apply food type filter\n    if (filters.foodType !== 'all') {\n      filtered = filtered.filter(business => business.type === filters.foodType);\n    }\n\n    // Apply price filter (based on available packs)\n    if (filters.maxPrice < 50 && packs.length > 0) {\n      const affordablePacks = packs.filter(pack => pack.precio_descuento <= filters.maxPrice * 1000);\n      const affordableComercioIds = [...new Set(affordablePacks.map(pack => pack.comercio_id))];\n      filtered = filtered.filter(business => affordableComercioIds.includes(business.id));\n    }\n\n    // Apply distance filter\n    filtered = filtered.filter(business => business.distance <= filters.maxDistance);\n\n    // Apply open now filter\n    if (filters.openNow) {\n      const now = new Date();\n      const currentTime = now.getHours() * 100 + now.getMinutes();\n      filtered = filtered.filter(business => {\n        const closingTime = parseInt(business.closingTime.replace(':', ''));\n        return currentTime < closingTime;\n      });\n    }\n    setFilteredBusinesses(filtered);\n  }, [searchTerm, filters, businesses, packs]);\n  const handleFilterChange = newFilters => {\n    setFilters(newFilters);\n  };\n\n  // Manejar cuando se conceden los permisos de ubicación\n  const handleLocationPermissionGranted = position => {\n    setUserLocation({\n      coords: {\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      },\n      name: (city === null || city === void 0 ? void 0 : city.name) || 'Tu ubicación'\n    });\n    setShowLocationRequest(false);\n  };\n\n  // Manejar cuando se deniegan los permisos\n  const handleLocationPermissionDenied = () => {\n    setUserLocation({\n      coords: {\n        lat: 4.6097,\n        lng: -74.0817\n      },\n      name: (city === null || city === void 0 ? void 0 : city.name) || 'Bogotá (ubicación por defecto)'\n    });\n    setShowLocationRequest(false);\n  };\n\n  // Manejar cuando el usuario decide omitir la ubicación\n  const handleLocationSkip = () => {\n    setUserLocation({\n      coords: {\n        lat: 4.6097,\n        lng: -74.0817\n      },\n      name: (city === null || city === void 0 ? void 0 : city.name) || 'Bogotá (ubicación por defecto)'\n    });\n    setShowLocationRequest(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"location-info\",\n          children: [/*#__PURE__*/_jsxDEV(MapPin, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: (city === null || city === void 0 ? void 0 : city.name) || 'Bogotá'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-actions\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"user-btn avatar-style\",\n            onClick: () => navigate('/profile'),\n            children: /*#__PURE__*/_jsxDEV(User, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Comercios cerca de ti\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Encuentra ofertas incre\\xEDbles en \", (city === null || city === void 0 ? void 0 : city.name) || 'tu zona']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-input-container\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"search-icon\",\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Buscar comercios...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            className: \"search-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"filter-btn\",\n          onClick: () => setShowFilters(true),\n          children: /*#__PURE__*/_jsxDEV(Filter, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"view-toggle\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-btn ${viewMode === 'list' ? 'active' : ''}`,\n          onClick: () => setViewMode('list'),\n          children: [/*#__PURE__*/_jsxDEV(List, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this), \"Lista\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-btn ${viewMode === 'map' ? 'active' : ''}`,\n          onClick: () => setViewMode('map'),\n          children: [/*#__PURE__*/_jsxDEV(Map, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), \"Mapa\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Cargando comercios...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Error al cargar datos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"retry-btn\",\n          onClick: () => window.location.reload(),\n          children: \"Reintentar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this) : viewMode === 'list' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"businesses-list\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"results-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [filteredBusinesses.length, \" comercios disponibles\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Cerca de \", city.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"businesses-grid\",\n            children: filteredBusinesses.map(business => /*#__PURE__*/_jsxDEV(BusinessCard, {\n              business: business\n            }, business.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this), filteredBusinesses.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-results\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-results-icon\",\n              children: \"\\uD83D\\uDD0D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"No se encontraron resultados\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Intenta ajustar los filtros o buscar algo diferente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-container\",\n        children: /*#__PURE__*/_jsxDEV(InteractiveMap, {\n          comercios: businesses,\n          selectedComercio: selectedComercio,\n          onComercioSelect: setSelectedComercio,\n          userLocation: userLocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), showFilters && /*#__PURE__*/_jsxDEV(FilterPanel, {\n      filters: filters,\n      onFiltersChange: handleFilterChange,\n      onClose: () => setShowFilters(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bottom-nav\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-item active\",\n        onClick: () => navigate('/main'),\n        children: [/*#__PURE__*/_jsxDEV(Home, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Inicio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-item\",\n        onClick: () => navigate('/cart'),\n        children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Carrito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-item\",\n        onClick: () => navigate('/pedidos-activos'),\n        children: [/*#__PURE__*/_jsxDEV(Package, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Pedidos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-item\",\n        onClick: () => navigate('/profile'),\n        children: [/*#__PURE__*/_jsxDEV(User, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, this), showLocationRequest && /*#__PURE__*/_jsxDEV(LocationPermissionRequest, {\n      onPermissionGranted: handleLocationPermissionGranted,\n      onPermissionDenied: handleLocationPermissionDenied,\n      onSkip: handleLocationSkip\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n};\n_s(MainScreen, \"FYAass+0i7JkM68NgdiSsaBZHkY=\", false, function () {\n  return [useNavigate, useGeolocation];\n});\n_c = MainScreen;\nexport default MainScreen;\nvar _c;\n$RefreshReg$(_c, \"MainScreen\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Search","Filter","MapPin","Clock","Euro","Star","Map","List","User","ShoppingCart","Package","Home","Settings","BusinessCard","FilterPanel","MapView","InteractiveMap","LocationPermissionRequest","useGeolocation","comerciosAPI","packsAPI","authAPI","mockApiService","jsxDEV","_jsxDEV","MainScreen","user","city","onLogout","_s","navigate","console","log","tipo","viewMode","setViewMode","showFilters","setShowFilters","searchTerm","setSearchTerm","filters","setFilters","foodType","maxPrice","maxDistance","openNow","businesses","setBusinesses","packs","setPacks","loading","setLoading","error","setError","filteredBusinesses","setFilteredBusinesses","selectedComercio","setSelectedComercio","userLocation","setUserLocation","showLocationRequest","setShowLocationRequest","locationRequested","setLocationRequested","locationLoading","locationError","position","permissionStatus","getLocationWithRetry","loadData","comerciosResponse","packsResponse","Promise","all","getComercios","limit","getPacks","transformedBusinesses","comercios","map","comercio","_comercio$packs","id","name","nombre","type","tipo_comida","rating","calificacion","distance","originalPrice","discountPrice","itemsAvailable","length","closingTime","horario","split","image","imagen","coords","coordenadas","lat","lng","description","descripcion","direccion","zona","telefono","tiempo_entrega","costo_envio","activo","err","fallbackData","_comercio$packs2","packsData","fallbackErr","initializeLocation","latitude","longitude","warn","filtered","trim","filter","business","toLowerCase","includes","affordablePacks","pack","precio_descuento","affordableComercioIds","Set","comercio_id","now","Date","currentTime","getHours","getMinutes","parseInt","replace","handleFilterChange","newFilters","handleLocationPermissionGranted","handleLocationPermissionDenied","handleLocationSkip","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","value","onChange","e","target","window","location","reload","onComercioSelect","onFiltersChange","onClose","onPermissionGranted","onPermissionDenied","onSkip","_c","$RefreshReg$"],"sources":["C:/Users/PERSONAL/Downloads/tugood tugo/src/pages/MainScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Search, Filter, MapPin, Clock, Euro, Star, Map, List, User, ShoppingCart, Package, Home, Settings } from 'lucide-react';\nimport BusinessCard from '../components/BusinessCard';\nimport FilterPanel from '../components/FilterPanel';\nimport MapView from '../components/MapView';\nimport InteractiveMap from '../components/InteractiveMap';\nimport LocationPermissionRequest from '../components/LocationPermissionRequest';\nimport useGeolocation from '../hooks/useGeolocation';\nimport { comerciosAPI, packsAPI, authAPI } from '../services/api';\nimport { mockApiService } from '../services/mockApi';\nimport '../styles/MainScreen.css';\nimport '../styles/InteractiveMap.css';\n\nconst MainScreen = ({ user, city, onLogout }) => {\n  const navigate = useNavigate();\n  \n  // Debug: verificar usuario\n  console.log('MainScreen - Usuario recibido:', user);\n  console.log('MainScreen - Tipo de usuario:', user?.tipo);\n  const [viewMode, setViewMode] = useState('list'); // 'list' or 'map'\n  const [showFilters, setShowFilters] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filters, setFilters] = useState({\n    foodType: 'all',\n    maxPrice: 50,\n    maxDistance: 5,\n    openNow: false\n  });\n\n  // State for businesses and packs data\n  const [businesses, setBusinesses] = useState([]);\n  const [packs, setPacks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const [filteredBusinesses, setFilteredBusinesses] = useState([]);\n  const [selectedComercio, setSelectedComercio] = useState(null);\n  const [userLocation, setUserLocation] = useState(null);\n  const [showLocationRequest, setShowLocationRequest] = useState(false);\n  const [locationRequested, setLocationRequested] = useState(false);\n  \n  // Hook de geolocalización\n  const { \n    loading: locationLoading, \n    error: locationError, \n    position, \n    permissionStatus,\n    getLocationWithRetry \n  } = useGeolocation();\n\n  // Load data from API\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Load comercios and packs using mock API directly\n        const [comerciosResponse, packsResponse] = await Promise.all([\n          mockApiService.getComercios({ limit: 50 }),\n          mockApiService.getPacks({ limit: 50 })\n        ]);\n\n        // Transform comercios data to match expected format\n        const transformedBusinesses = comerciosResponse.comercios.map(comercio => ({\n          id: comercio.id,\n          name: comercio.nombre,\n          type: comercio.tipo_comida,\n          rating: comercio.calificacion || 4.5,\n          distance: 0.5,\n          originalPrice: 15000,\n          discountPrice: 8000,\n          itemsAvailable: comercio.packs?.length || 2,\n          closingTime: comercio.horario.split(' - ')[1] || '22:00',\n          image: comercio.imagen || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=300&h=200&fit=crop',\n          coords: comercio.coordenadas || { lat: 4.6351, lng: -74.0669 },\n          description: comercio.descripcion || 'Comercio local',\n          direccion: comercio.direccion,\n          zona: comercio.zona,\n          telefono: comercio.telefono,\n          tiempo_entrega: comercio.tiempo_entrega,\n          costo_envio: comercio.costo_envio,\n          activo: comercio.activo\n        }));\n\n        setBusinesses(transformedBusinesses);\n        setPacks(packsResponse.packs || []);\n      } catch (err) {\n        console.error('Error loading data:', err);\n        // Cargar datos de fallback si hay error\n        try {\n          const fallbackData = await mockApiService.getComercios();\n          const transformedBusinesses = fallbackData.comercios.map(comercio => ({\n            id: comercio.id,\n            name: comercio.nombre,\n            type: comercio.tipo_comida,\n            rating: comercio.calificacion || 4.5,\n            distance: 0.5,\n            originalPrice: 15000,\n            discountPrice: 8000,\n            itemsAvailable: comercio.packs?.length || 2,\n            closingTime: '22:00',\n            image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=300&h=200&fit=crop',\n            coords: comercio.coordenadas || { lat: 4.6351, lng: -74.0669 },\n            description: comercio.descripcion,\n            direccion: comercio.direccion,\n            zona: comercio.zona,\n            telefono: comercio.telefono,\n            tiempo_entrega: comercio.tiempo_entrega,\n            costo_envio: comercio.costo_envio,\n            activo: comercio.activo\n          }));\n          \n          setBusinesses(transformedBusinesses);\n          const packsData = await mockApiService.getPacks();\n          setPacks(packsData.packs || []);\n          setError(null); // Limpiar error si el fallback funciona\n        } catch (fallbackErr) {\n          console.error('Error with fallback data:', fallbackErr);\n          setError('Error cargando datos. Intenta nuevamente.');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // Manejar geolocalización mejorada\n  useEffect(() => {\n    const initializeLocation = async () => {\n      // Si ya tenemos una ubicación, no hacer nada\n      if (userLocation) return;\n      \n      // Verificar si ya se denegaron los permisos\n      if (permissionStatus === 'denied') {\n        setUserLocation({\n          coords: { lat: 4.6097, lng: -74.0817 },\n          name: city?.name || 'Bogotá (ubicación por defecto)'\n        });\n        return;\n      }\n      \n      // Si los permisos están concedidos, obtener ubicación\n      if (permissionStatus === 'granted') {\n        try {\n          const position = await getLocationWithRetry();\n          setUserLocation({\n            coords: {\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            },\n            name: city?.name || 'Tu ubicación'\n          });\n        } catch (error) {\n          console.warn('Error getting location:', error);\n          setUserLocation({\n            coords: { lat: 4.6097, lng: -74.0817 },\n            name: city?.name || 'Bogotá (ubicación por defecto)'\n          });\n        }\n      } else if (permissionStatus === 'prompt' && !locationRequested) {\n        // Mostrar modal para solicitar permisos solo una vez\n        setShowLocationRequest(true);\n        setLocationRequested(true);\n      }\n    };\n\n    initializeLocation();\n  }, [permissionStatus, city, userLocation, getLocationWithRetry]);\n\n  // Filter businesses based on search and filters\n  useEffect(() => {\n    // Only filter if we have businesses data\n    if (businesses.length === 0) {\n      setFilteredBusinesses([]);\n      return;\n    }\n\n    let filtered = businesses;\n\n    // Apply search filter\n    if (searchTerm.trim()) {\n      filtered = filtered.filter(business =>\n        business.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        business.type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        (business.description && business.description.toLowerCase().includes(searchTerm.toLowerCase()))\n      );\n    }\n\n    // Apply food type filter\n    if (filters.foodType !== 'all') {\n      filtered = filtered.filter(business => business.type === filters.foodType);\n    }\n\n    // Apply price filter (based on available packs)\n    if (filters.maxPrice < 50 && packs.length > 0) {\n      const affordablePacks = packs.filter(pack => pack.precio_descuento <= filters.maxPrice * 1000);\n      const affordableComercioIds = [...new Set(affordablePacks.map(pack => pack.comercio_id))];\n      filtered = filtered.filter(business => affordableComercioIds.includes(business.id));\n    }\n\n    // Apply distance filter\n    filtered = filtered.filter(business => business.distance <= filters.maxDistance);\n\n    // Apply open now filter\n    if (filters.openNow) {\n      const now = new Date();\n      const currentTime = now.getHours() * 100 + now.getMinutes();\n      filtered = filtered.filter(business => {\n        const closingTime = parseInt(business.closingTime.replace(':', ''));\n        return currentTime < closingTime;\n      });\n    }\n\n    setFilteredBusinesses(filtered);\n  }, [searchTerm, filters, businesses, packs]);\n\n  const handleFilterChange = (newFilters) => {\n    setFilters(newFilters);\n  };\n\n  // Manejar cuando se conceden los permisos de ubicación\n  const handleLocationPermissionGranted = (position) => {\n    setUserLocation({\n      coords: {\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      },\n      name: city?.name || 'Tu ubicación'\n    });\n    setShowLocationRequest(false);\n  };\n\n  // Manejar cuando se deniegan los permisos\n  const handleLocationPermissionDenied = () => {\n    setUserLocation({\n      coords: { lat: 4.6097, lng: -74.0817 },\n      name: city?.name || 'Bogotá (ubicación por defecto)'\n    });\n    setShowLocationRequest(false);\n  };\n\n  // Manejar cuando el usuario decide omitir la ubicación\n  const handleLocationSkip = () => {\n    setUserLocation({\n      coords: { lat: 4.6097, lng: -74.0817 },\n      name: city?.name || 'Bogotá (ubicación por defecto)'\n    });\n    setShowLocationRequest(false);\n  };\n\n  return (\n    <div className=\"main-screen\">\n      {/* Header */}\n      <div className=\"header\">\n        <div className=\"header-content\">\n          <div className=\"location-info\">\n            <MapPin size={16} />\n            <span>{city?.name || 'Bogotá'}</span>\n          </div>\n          <div className=\"user-actions\">\n            <button className=\"user-btn avatar-style\" onClick={() => navigate('/profile')}>\n              <User size={20} />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      \n      <div className=\"main-content\">\n        <div className=\"content-header\">\n          <h2>Comercios cerca de ti</h2>\n          <p>Encuentra ofertas increíbles en {city?.name || 'tu zona'}</p>\n        </div>\n          \n        <div className=\"search-bar\">\n          <div className=\"search-input-container\">\n            <Search className=\"search-icon\" size={20} />\n            <input\n              type=\"text\"\n              placeholder=\"Buscar comercios...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"search-input\"\n            />\n          </div>\n          <button \n            className=\"filter-btn\"\n            onClick={() => setShowFilters(true)}\n          >\n            <Filter size={20} />\n          </button>\n        </div>\n\n        <div className=\"view-toggle\">\n          <button \n            className={`toggle-btn ${viewMode === 'list' ? 'active' : ''}`}\n            onClick={() => setViewMode('list')}\n          >\n            <List size={18} />\n            Lista\n          </button>\n          <button \n            className={`toggle-btn ${viewMode === 'map' ? 'active' : ''}`}\n            onClick={() => setViewMode('map')}\n          >\n            <Map size={18} />\n            Mapa\n          </button>\n        </div>\n\n        {/* Content Section */}\n        {loading ? (\n          <div className=\"loading-container\">\n            <div className=\"loading-spinner\"></div>\n            <p>Cargando comercios...</p>\n          </div>\n        ) : error ? (\n          <div className=\"error-container\">\n            <div className=\"error-icon\">⚠️</div>\n            <h3>Error al cargar datos</h3>\n            <p>{error}</p>\n            <button \n              className=\"retry-btn\"\n              onClick={() => window.location.reload()}\n            >\n              Reintentar\n            </button>\n          </div>\n        ) : viewMode === 'list' ? (\n          <div className=\"businesses-list\">\n            <div className=\"container\">\n              <div className=\"results-header\">\n                <h2>{filteredBusinesses.length} comercios disponibles</h2>\n                <p>Cerca de {city.name}</p>\n              </div>\n              \n              <div className=\"businesses-grid\">\n                {filteredBusinesses.map((business) => (\n                  <BusinessCard key={business.id} business={business} />\n                ))}\n              </div>\n\n              {filteredBusinesses.length === 0 && !loading && (\n                <div className=\"no-results\">\n                  <div className=\"no-results-icon\">🔍</div>\n                  <h3>No se encontraron resultados</h3>\n                  <p>Intenta ajustar los filtros o buscar algo diferente</p>\n                </div>\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className=\"map-container\">\n            <InteractiveMap \n              comercios={businesses}\n              selectedComercio={selectedComercio}\n              onComercioSelect={setSelectedComercio}\n              userLocation={userLocation}\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Filter Panel */}\n      {showFilters && (\n        <FilterPanel\n          filters={filters}\n          onFiltersChange={handleFilterChange}\n          onClose={() => setShowFilters(false)}\n        />\n      )}\n\n      {/* Bottom Navigation */}\n      <div className=\"bottom-nav\">\n        <button \n          className=\"nav-item active\"\n          onClick={() => navigate('/main')}\n        >\n          <Home size={20} />\n          <span>Inicio</span>\n        </button>\n        <button \n          className=\"nav-item\"\n          onClick={() => navigate('/cart')}\n        >\n          <ShoppingCart size={20} />\n          <span>Carrito</span>\n        </button>\n        <button \n          className=\"nav-item\"\n          onClick={() => navigate('/pedidos-activos')}\n        >\n          <Package size={20} />\n          <span>Pedidos</span>\n        </button>\n        <button \n          className=\"nav-item\"\n          onClick={() => navigate('/profile')}\n        >\n          <User size={20} />\n          <span>Perfil</span>\n        </button>\n      </div>\n\n      {/* Location Permission Request Modal */}\n      {showLocationRequest && (\n        <LocationPermissionRequest\n          onPermissionGranted={handleLocationPermissionGranted}\n          onPermissionDenied={handleLocationPermissionDenied}\n          onSkip={handleLocationSkip}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default MainScreen;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAEC,IAAI,EAAEC,IAAI,EAAEC,YAAY,EAAEC,OAAO,EAAEC,IAAI,EAAEC,QAAQ,QAAQ,cAAc;AAChI,OAAOC,YAAY,MAAM,4BAA4B;AACrD,OAAOC,WAAW,MAAM,2BAA2B;AACnD,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,cAAc,MAAM,8BAA8B;AACzD,OAAOC,yBAAyB,MAAM,yCAAyC;AAC/E,OAAOC,cAAc,MAAM,yBAAyB;AACpD,SAASC,YAAY,EAAEC,QAAQ,EAAEC,OAAO,QAAQ,iBAAiB;AACjE,SAASC,cAAc,QAAQ,qBAAqB;AACpD,OAAO,0BAA0B;AACjC,OAAO,8BAA8B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,MAAMC,UAAU,GAAGA,CAAC;EAAEC,IAAI;EAAEC,IAAI;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC/C,MAAMC,QAAQ,GAAG/B,WAAW,CAAC,CAAC;;EAE9B;EACAgC,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEN,IAAI,CAAC;EACnDK,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEO,IAAI,CAAC;EACxD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGtC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;EAClD,MAAM,CAACuC,WAAW,EAAEC,cAAc,CAAC,GAAGxC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACyC,UAAU,EAAEC,aAAa,CAAC,GAAG1C,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAAC2C,OAAO,EAAEC,UAAU,CAAC,GAAG5C,QAAQ,CAAC;IACrC6C,QAAQ,EAAE,KAAK;IACfC,QAAQ,EAAE,EAAE;IACZC,WAAW,EAAE,CAAC;IACdC,OAAO,EAAE;EACX,CAAC,CAAC;;EAEF;EACA,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGlD,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACmD,KAAK,EAAEC,QAAQ,CAAC,GAAGpD,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACqD,OAAO,EAAEC,UAAU,CAAC,GAAGtD,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACuD,KAAK,EAAEC,QAAQ,CAAC,GAAGxD,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAM,CAACyD,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG1D,QAAQ,CAAC,EAAE,CAAC;EAChE,MAAM,CAAC2D,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG5D,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAAC6D,YAAY,EAAEC,eAAe,CAAC,GAAG9D,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAAC+D,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGhE,QAAQ,CAAC,KAAK,CAAC;EACrE,MAAM,CAACiE,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGlE,QAAQ,CAAC,KAAK,CAAC;;EAEjE;EACA,MAAM;IACJqD,OAAO,EAAEc,eAAe;IACxBZ,KAAK,EAAEa,aAAa;IACpBC,QAAQ;IACRC,gBAAgB;IAChBC;EACF,CAAC,GAAGlD,cAAc,CAAC,CAAC;;EAEpB;EACApB,SAAS,CAAC,MAAM;IACd,MAAMuE,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACFlB,UAAU,CAAC,IAAI,CAAC;QAChBE,QAAQ,CAAC,IAAI,CAAC;;QAEd;QACA,MAAM,CAACiB,iBAAiB,EAAEC,aAAa,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC3DnD,cAAc,CAACoD,YAAY,CAAC;UAAEC,KAAK,EAAE;QAAG,CAAC,CAAC,EAC1CrD,cAAc,CAACsD,QAAQ,CAAC;UAAED,KAAK,EAAE;QAAG,CAAC,CAAC,CACvC,CAAC;;QAEF;QACA,MAAME,qBAAqB,GAAGP,iBAAiB,CAACQ,SAAS,CAACC,GAAG,CAACC,QAAQ;UAAA,IAAAC,eAAA;UAAA,OAAK;YACzEC,EAAE,EAAEF,QAAQ,CAACE,EAAE;YACfC,IAAI,EAAEH,QAAQ,CAACI,MAAM;YACrBC,IAAI,EAAEL,QAAQ,CAACM,WAAW;YAC1BC,MAAM,EAAEP,QAAQ,CAACQ,YAAY,IAAI,GAAG;YACpCC,QAAQ,EAAE,GAAG;YACbC,aAAa,EAAE,KAAK;YACpBC,aAAa,EAAE,IAAI;YACnBC,cAAc,EAAE,EAAAX,eAAA,GAAAD,QAAQ,CAAChC,KAAK,cAAAiC,eAAA,uBAAdA,eAAA,CAAgBY,MAAM,KAAI,CAAC;YAC3CC,WAAW,EAAEd,QAAQ,CAACe,OAAO,CAACC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,OAAO;YACxDC,KAAK,EAAEjB,QAAQ,CAACkB,MAAM,IAAI,mFAAmF;YAC7GC,MAAM,EAAEnB,QAAQ,CAACoB,WAAW,IAAI;cAAEC,GAAG,EAAE,MAAM;cAAEC,GAAG,EAAE,CAAC;YAAQ,CAAC;YAC9DC,WAAW,EAAEvB,QAAQ,CAACwB,WAAW,IAAI,gBAAgB;YACrDC,SAAS,EAAEzB,QAAQ,CAACyB,SAAS;YAC7BC,IAAI,EAAE1B,QAAQ,CAAC0B,IAAI;YACnBC,QAAQ,EAAE3B,QAAQ,CAAC2B,QAAQ;YAC3BC,cAAc,EAAE5B,QAAQ,CAAC4B,cAAc;YACvCC,WAAW,EAAE7B,QAAQ,CAAC6B,WAAW;YACjCC,MAAM,EAAE9B,QAAQ,CAAC8B;UACnB,CAAC;QAAA,CAAC,CAAC;QAEH/D,aAAa,CAAC8B,qBAAqB,CAAC;QACpC5B,QAAQ,CAACsB,aAAa,CAACvB,KAAK,IAAI,EAAE,CAAC;MACrC,CAAC,CAAC,OAAO+D,GAAG,EAAE;QACZhF,OAAO,CAACqB,KAAK,CAAC,qBAAqB,EAAE2D,GAAG,CAAC;QACzC;QACA,IAAI;UACF,MAAMC,YAAY,GAAG,MAAM1F,cAAc,CAACoD,YAAY,CAAC,CAAC;UACxD,MAAMG,qBAAqB,GAAGmC,YAAY,CAAClC,SAAS,CAACC,GAAG,CAACC,QAAQ;YAAA,IAAAiC,gBAAA;YAAA,OAAK;cACpE/B,EAAE,EAAEF,QAAQ,CAACE,EAAE;cACfC,IAAI,EAAEH,QAAQ,CAACI,MAAM;cACrBC,IAAI,EAAEL,QAAQ,CAACM,WAAW;cAC1BC,MAAM,EAAEP,QAAQ,CAACQ,YAAY,IAAI,GAAG;cACpCC,QAAQ,EAAE,GAAG;cACbC,aAAa,EAAE,KAAK;cACpBC,aAAa,EAAE,IAAI;cACnBC,cAAc,EAAE,EAAAqB,gBAAA,GAAAjC,QAAQ,CAAChC,KAAK,cAAAiE,gBAAA,uBAAdA,gBAAA,CAAgBpB,MAAM,KAAI,CAAC;cAC3CC,WAAW,EAAE,OAAO;cACpBG,KAAK,EAAE,mFAAmF;cAC1FE,MAAM,EAAEnB,QAAQ,CAACoB,WAAW,IAAI;gBAAEC,GAAG,EAAE,MAAM;gBAAEC,GAAG,EAAE,CAAC;cAAQ,CAAC;cAC9DC,WAAW,EAAEvB,QAAQ,CAACwB,WAAW;cACjCC,SAAS,EAAEzB,QAAQ,CAACyB,SAAS;cAC7BC,IAAI,EAAE1B,QAAQ,CAAC0B,IAAI;cACnBC,QAAQ,EAAE3B,QAAQ,CAAC2B,QAAQ;cAC3BC,cAAc,EAAE5B,QAAQ,CAAC4B,cAAc;cACvCC,WAAW,EAAE7B,QAAQ,CAAC6B,WAAW;cACjCC,MAAM,EAAE9B,QAAQ,CAAC8B;YACnB,CAAC;UAAA,CAAC,CAAC;UAEH/D,aAAa,CAAC8B,qBAAqB,CAAC;UACpC,MAAMqC,SAAS,GAAG,MAAM5F,cAAc,CAACsD,QAAQ,CAAC,CAAC;UACjD3B,QAAQ,CAACiE,SAAS,CAAClE,KAAK,IAAI,EAAE,CAAC;UAC/BK,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,OAAO8D,WAAW,EAAE;UACpBpF,OAAO,CAACqB,KAAK,CAAC,2BAA2B,EAAE+D,WAAW,CAAC;UACvD9D,QAAQ,CAAC,2CAA2C,CAAC;QACvD;MACF,CAAC,SAAS;QACRF,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDkB,QAAQ,CAAC,CAAC;EACZ,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAvE,SAAS,CAAC,MAAM;IACd,MAAMsH,kBAAkB,GAAG,MAAAA,CAAA,KAAY;MACrC;MACA,IAAI1D,YAAY,EAAE;;MAElB;MACA,IAAIS,gBAAgB,KAAK,QAAQ,EAAE;QACjCR,eAAe,CAAC;UACdwC,MAAM,EAAE;YAAEE,GAAG,EAAE,MAAM;YAAEC,GAAG,EAAE,CAAC;UAAQ,CAAC;UACtCnB,IAAI,EAAE,CAAAxD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEwD,IAAI,KAAI;QACtB,CAAC,CAAC;QACF;MACF;;MAEA;MACA,IAAIhB,gBAAgB,KAAK,SAAS,EAAE;QAClC,IAAI;UACF,MAAMD,QAAQ,GAAG,MAAME,oBAAoB,CAAC,CAAC;UAC7CT,eAAe,CAAC;YACdwC,MAAM,EAAE;cACNE,GAAG,EAAEnC,QAAQ,CAACiC,MAAM,CAACkB,QAAQ;cAC7Bf,GAAG,EAAEpC,QAAQ,CAACiC,MAAM,CAACmB;YACvB,CAAC;YACDnC,IAAI,EAAE,CAAAxD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEwD,IAAI,KAAI;UACtB,CAAC,CAAC;QACJ,CAAC,CAAC,OAAO/B,KAAK,EAAE;UACdrB,OAAO,CAACwF,IAAI,CAAC,yBAAyB,EAAEnE,KAAK,CAAC;UAC9CO,eAAe,CAAC;YACdwC,MAAM,EAAE;cAAEE,GAAG,EAAE,MAAM;cAAEC,GAAG,EAAE,CAAC;YAAQ,CAAC;YACtCnB,IAAI,EAAE,CAAAxD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEwD,IAAI,KAAI;UACtB,CAAC,CAAC;QACJ;MACF,CAAC,MAAM,IAAIhB,gBAAgB,KAAK,QAAQ,IAAI,CAACL,iBAAiB,EAAE;QAC9D;QACAD,sBAAsB,CAAC,IAAI,CAAC;QAC5BE,oBAAoB,CAAC,IAAI,CAAC;MAC5B;IACF,CAAC;IAEDqD,kBAAkB,CAAC,CAAC;EACtB,CAAC,EAAE,CAACjD,gBAAgB,EAAExC,IAAI,EAAE+B,YAAY,EAAEU,oBAAoB,CAAC,CAAC;;EAEhE;EACAtE,SAAS,CAAC,MAAM;IACd;IACA,IAAIgD,UAAU,CAAC+C,MAAM,KAAK,CAAC,EAAE;MAC3BtC,qBAAqB,CAAC,EAAE,CAAC;MACzB;IACF;IAEA,IAAIiE,QAAQ,GAAG1E,UAAU;;IAEzB;IACA,IAAIR,UAAU,CAACmF,IAAI,CAAC,CAAC,EAAE;MACrBD,QAAQ,GAAGA,QAAQ,CAACE,MAAM,CAACC,QAAQ,IACjCA,QAAQ,CAACxC,IAAI,CAACyC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvF,UAAU,CAACsF,WAAW,CAAC,CAAC,CAAC,IAC9DD,QAAQ,CAACtC,IAAI,CAACuC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvF,UAAU,CAACsF,WAAW,CAAC,CAAC,CAAC,IAC7DD,QAAQ,CAACpB,WAAW,IAAIoB,QAAQ,CAACpB,WAAW,CAACqB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvF,UAAU,CAACsF,WAAW,CAAC,CAAC,CAC/F,CAAC;IACH;;IAEA;IACA,IAAIpF,OAAO,CAACE,QAAQ,KAAK,KAAK,EAAE;MAC9B8E,QAAQ,GAAGA,QAAQ,CAACE,MAAM,CAACC,QAAQ,IAAIA,QAAQ,CAACtC,IAAI,KAAK7C,OAAO,CAACE,QAAQ,CAAC;IAC5E;;IAEA;IACA,IAAIF,OAAO,CAACG,QAAQ,GAAG,EAAE,IAAIK,KAAK,CAAC6C,MAAM,GAAG,CAAC,EAAE;MAC7C,MAAMiC,eAAe,GAAG9E,KAAK,CAAC0E,MAAM,CAACK,IAAI,IAAIA,IAAI,CAACC,gBAAgB,IAAIxF,OAAO,CAACG,QAAQ,GAAG,IAAI,CAAC;MAC9F,MAAMsF,qBAAqB,GAAG,CAAC,GAAG,IAAIC,GAAG,CAACJ,eAAe,CAAC/C,GAAG,CAACgD,IAAI,IAAIA,IAAI,CAACI,WAAW,CAAC,CAAC,CAAC;MACzFX,QAAQ,GAAGA,QAAQ,CAACE,MAAM,CAACC,QAAQ,IAAIM,qBAAqB,CAACJ,QAAQ,CAACF,QAAQ,CAACzC,EAAE,CAAC,CAAC;IACrF;;IAEA;IACAsC,QAAQ,GAAGA,QAAQ,CAACE,MAAM,CAACC,QAAQ,IAAIA,QAAQ,CAAClC,QAAQ,IAAIjD,OAAO,CAACI,WAAW,CAAC;;IAEhF;IACA,IAAIJ,OAAO,CAACK,OAAO,EAAE;MACnB,MAAMuF,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;MACtB,MAAMC,WAAW,GAAGF,GAAG,CAACG,QAAQ,CAAC,CAAC,GAAG,GAAG,GAAGH,GAAG,CAACI,UAAU,CAAC,CAAC;MAC3DhB,QAAQ,GAAGA,QAAQ,CAACE,MAAM,CAACC,QAAQ,IAAI;QACrC,MAAM7B,WAAW,GAAG2C,QAAQ,CAACd,QAAQ,CAAC7B,WAAW,CAAC4C,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QACnE,OAAOJ,WAAW,GAAGxC,WAAW;MAClC,CAAC,CAAC;IACJ;IAEAvC,qBAAqB,CAACiE,QAAQ,CAAC;EACjC,CAAC,EAAE,CAAClF,UAAU,EAAEE,OAAO,EAAEM,UAAU,EAAEE,KAAK,CAAC,CAAC;EAE5C,MAAM2F,kBAAkB,GAAIC,UAAU,IAAK;IACzCnG,UAAU,CAACmG,UAAU,CAAC;EACxB,CAAC;;EAED;EACA,MAAMC,+BAA+B,GAAI3E,QAAQ,IAAK;IACpDP,eAAe,CAAC;MACdwC,MAAM,EAAE;QACNE,GAAG,EAAEnC,QAAQ,CAACiC,MAAM,CAACkB,QAAQ;QAC7Bf,GAAG,EAAEpC,QAAQ,CAACiC,MAAM,CAACmB;MACvB,CAAC;MACDnC,IAAI,EAAE,CAAAxD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEwD,IAAI,KAAI;IACtB,CAAC,CAAC;IACFtB,sBAAsB,CAAC,KAAK,CAAC;EAC/B,CAAC;;EAED;EACA,MAAMiF,8BAA8B,GAAGA,CAAA,KAAM;IAC3CnF,eAAe,CAAC;MACdwC,MAAM,EAAE;QAAEE,GAAG,EAAE,MAAM;QAAEC,GAAG,EAAE,CAAC;MAAQ,CAAC;MACtCnB,IAAI,EAAE,CAAAxD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEwD,IAAI,KAAI;IACtB,CAAC,CAAC;IACFtB,sBAAsB,CAAC,KAAK,CAAC;EAC/B,CAAC;;EAED;EACA,MAAMkF,kBAAkB,GAAGA,CAAA,KAAM;IAC/BpF,eAAe,CAAC;MACdwC,MAAM,EAAE;QAAEE,GAAG,EAAE,MAAM;QAAEC,GAAG,EAAE,CAAC;MAAQ,CAAC;MACtCnB,IAAI,EAAE,CAAAxD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEwD,IAAI,KAAI;IACtB,CAAC,CAAC;IACFtB,sBAAsB,CAAC,KAAK,CAAC;EAC/B,CAAC;EAED,oBACErC,OAAA;IAAKwH,SAAS,EAAC,aAAa;IAAAC,QAAA,gBAE1BzH,OAAA;MAAKwH,SAAS,EAAC,QAAQ;MAAAC,QAAA,eACrBzH,OAAA;QAAKwH,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BzH,OAAA;UAAKwH,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5BzH,OAAA,CAACtB,MAAM;YAACgJ,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACpB9H,OAAA;YAAAyH,QAAA,EAAO,CAAAtH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEwD,IAAI,KAAI;UAAQ;YAAAgE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClC,CAAC,eACN9H,OAAA;UAAKwH,SAAS,EAAC,cAAc;UAAAC,QAAA,eAC3BzH,OAAA;YAAQwH,SAAS,EAAC,uBAAuB;YAACO,OAAO,EAAEA,CAAA,KAAMzH,QAAQ,CAAC,UAAU,CAAE;YAAAmH,QAAA,eAC5EzH,OAAA,CAAChB,IAAI;cAAC0I,IAAI,EAAE;YAAG;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACZ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGN9H,OAAA;MAAKwH,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAC3BzH,OAAA;QAAKwH,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BzH,OAAA;UAAAyH,QAAA,EAAI;QAAqB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC9B9H,OAAA;UAAAyH,QAAA,GAAG,qCAAgC,EAAC,CAAAtH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEwD,IAAI,KAAI,SAAS;QAAA;UAAAgE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7D,CAAC,eAEN9H,OAAA;QAAKwH,SAAS,EAAC,YAAY;QAAAC,QAAA,gBACzBzH,OAAA;UAAKwH,SAAS,EAAC,wBAAwB;UAAAC,QAAA,gBACrCzH,OAAA,CAACxB,MAAM;YAACgJ,SAAS,EAAC,aAAa;YAACE,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC5C9H,OAAA;YACE6D,IAAI,EAAC,MAAM;YACXmE,WAAW,EAAC,qBAAqB;YACjCC,KAAK,EAAEnH,UAAW;YAClBoH,QAAQ,EAAGC,CAAC,IAAKpH,aAAa,CAACoH,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAC/CT,SAAS,EAAC;UAAc;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACN9H,OAAA;UACEwH,SAAS,EAAC,YAAY;UACtBO,OAAO,EAAEA,CAAA,KAAMlH,cAAc,CAAC,IAAI,CAAE;UAAA4G,QAAA,eAEpCzH,OAAA,CAACvB,MAAM;YAACiJ,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACd,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAEN9H,OAAA;QAAKwH,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BzH,OAAA;UACEwH,SAAS,EAAE,cAAc9G,QAAQ,KAAK,MAAM,GAAG,QAAQ,GAAG,EAAE,EAAG;UAC/DqH,OAAO,EAAEA,CAAA,KAAMpH,WAAW,CAAC,MAAM,CAAE;UAAA8G,QAAA,gBAEnCzH,OAAA,CAACjB,IAAI;YAAC2I,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,SAEpB;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT9H,OAAA;UACEwH,SAAS,EAAE,cAAc9G,QAAQ,KAAK,KAAK,GAAG,QAAQ,GAAG,EAAE,EAAG;UAC9DqH,OAAO,EAAEA,CAAA,KAAMpH,WAAW,CAAC,KAAK,CAAE;UAAA8G,QAAA,gBAElCzH,OAAA,CAAClB,GAAG;YAAC4I,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,QAEnB;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EAGLpG,OAAO,gBACN1B,OAAA;QAAKwH,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAChCzH,OAAA;UAAKwH,SAAS,EAAC;QAAiB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACvC9H,OAAA;UAAAyH,QAAA,EAAG;QAAqB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB,CAAC,GACJlG,KAAK,gBACP5B,OAAA;QAAKwH,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC9BzH,OAAA;UAAKwH,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAE;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACpC9H,OAAA;UAAAyH,QAAA,EAAI;QAAqB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC9B9H,OAAA;UAAAyH,QAAA,EAAI7F;QAAK;UAAA+F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACd9H,OAAA;UACEwH,SAAS,EAAC,WAAW;UACrBO,OAAO,EAAEA,CAAA,KAAMM,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAE;UAAAd,QAAA,EACzC;QAED;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,GACJpH,QAAQ,KAAK,MAAM,gBACrBV,OAAA;QAAKwH,SAAS,EAAC,iBAAiB;QAAAC,QAAA,eAC9BzH,OAAA;UAAKwH,SAAS,EAAC,WAAW;UAAAC,QAAA,gBACxBzH,OAAA;YAAKwH,SAAS,EAAC,gBAAgB;YAAAC,QAAA,gBAC7BzH,OAAA;cAAAyH,QAAA,GAAK3F,kBAAkB,CAACuC,MAAM,EAAC,wBAAsB;YAAA;cAAAsD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC1D9H,OAAA;cAAAyH,QAAA,GAAG,WAAS,EAACtH,IAAI,CAACwD,IAAI;YAAA;cAAAgE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC,eAEN9H,OAAA;YAAKwH,SAAS,EAAC,iBAAiB;YAAAC,QAAA,EAC7B3F,kBAAkB,CAACyB,GAAG,CAAE4C,QAAQ,iBAC/BnG,OAAA,CAACX,YAAY;cAAmB8G,QAAQ,EAAEA;YAAS,GAAhCA,QAAQ,CAACzC,EAAE;cAAAiE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAuB,CACtD;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,EAELhG,kBAAkB,CAACuC,MAAM,KAAK,CAAC,IAAI,CAAC3C,OAAO,iBAC1C1B,OAAA;YAAKwH,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBzH,OAAA;cAAKwH,SAAS,EAAC,iBAAiB;cAAAC,QAAA,EAAC;YAAE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACzC9H,OAAA;cAAAyH,QAAA,EAAI;YAA4B;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACrC9H,OAAA;cAAAyH,QAAA,EAAG;YAAmD;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvD,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,gBAEN9H,OAAA;QAAKwH,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5BzH,OAAA,CAACR,cAAc;UACb8D,SAAS,EAAEhC,UAAW;UACtBU,gBAAgB,EAAEA,gBAAiB;UACnCwG,gBAAgB,EAAEvG,mBAAoB;UACtCC,YAAY,EAAEA;QAAa;UAAAyF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5B;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGLlH,WAAW,iBACVZ,OAAA,CAACV,WAAW;MACV0B,OAAO,EAAEA,OAAQ;MACjByH,eAAe,EAAEtB,kBAAmB;MACpCuB,OAAO,EAAEA,CAAA,KAAM7H,cAAc,CAAC,KAAK;IAAE;MAAA8G,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtC,CACF,eAGD9H,OAAA;MAAKwH,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzBzH,OAAA;QACEwH,SAAS,EAAC,iBAAiB;QAC3BO,OAAO,EAAEA,CAAA,KAAMzH,QAAQ,CAAC,OAAO,CAAE;QAAAmH,QAAA,gBAEjCzH,OAAA,CAACb,IAAI;UAACuI,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAClB9H,OAAA;UAAAyH,QAAA,EAAM;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACb,CAAC,eACT9H,OAAA;QACEwH,SAAS,EAAC,UAAU;QACpBO,OAAO,EAAEA,CAAA,KAAMzH,QAAQ,CAAC,OAAO,CAAE;QAAAmH,QAAA,gBAEjCzH,OAAA,CAACf,YAAY;UAACyI,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC1B9H,OAAA;UAAAyH,QAAA,EAAM;QAAO;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACd,CAAC,eACT9H,OAAA;QACEwH,SAAS,EAAC,UAAU;QACpBO,OAAO,EAAEA,CAAA,KAAMzH,QAAQ,CAAC,kBAAkB,CAAE;QAAAmH,QAAA,gBAE5CzH,OAAA,CAACd,OAAO;UAACwI,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACrB9H,OAAA;UAAAyH,QAAA,EAAM;QAAO;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACd,CAAC,eACT9H,OAAA;QACEwH,SAAS,EAAC,UAAU;QACpBO,OAAO,EAAEA,CAAA,KAAMzH,QAAQ,CAAC,UAAU,CAAE;QAAAmH,QAAA,gBAEpCzH,OAAA,CAAChB,IAAI;UAAC0I,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAClB9H,OAAA;UAAAyH,QAAA,EAAM;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACb,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EAGL1F,mBAAmB,iBAClBpC,OAAA,CAACP,yBAAyB;MACxBkJ,mBAAmB,EAAEtB,+BAAgC;MACrDuB,kBAAkB,EAAEtB,8BAA+B;MACnDuB,MAAM,EAAEtB;IAAmB;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5B,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACzH,EAAA,CApZIJ,UAAU;EAAA,QACG1B,WAAW,EAkCxBmB,cAAc;AAAA;AAAAoJ,EAAA,GAnCd7I,UAAU;AAsZhB,eAAeA,UAAU;AAAC,IAAA6I,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}