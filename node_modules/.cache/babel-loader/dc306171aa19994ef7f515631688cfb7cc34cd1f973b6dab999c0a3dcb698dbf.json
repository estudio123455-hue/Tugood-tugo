{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/PERSONAL/Downloads/tugood tugo/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1;import React,{useState}from'react';import{useNavigate}from'react-router-dom';import styled from'styled-components';import{toast}from'react-toastify';import{Loader2}from'lucide-react';import OTPVerification from'./OTPVerification';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthForm=_ref=>{let{isLogin=true}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[name,setName]=useState('');const[isLoading,setIsLoading]=useState(false);const[showOtpVerification,setShowOtpVerification]=useState(false);const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();if(!email){toast.error('Por favor ingresa tu correo electrónico');return;}if(!isLogin&&!name){toast.error('Por favor ingresa tu nombre');return;}if(!isLogin&&!password){toast.error('Por favor ingresa una contraseña');return;}setIsLoading(true);try{// Primero, solicitar el código OTP\nconst response=await fetch('http://localhost:5000/api/otp/request',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});const data=await response.json();if(response.ok){toast.success('Código de verificación enviado a tu correo');setShowOtpVerification(true);}else{toast.error(data.message||'Error al enviar el código de verificación');}}catch(error){console.error('Error al enviar el código de verificación:',error);toast.error('Error de conexión. Intenta de nuevo más tarde.');}finally{setIsLoading(false);}};const handleOtpSuccess=token=>{// Guardar el token en localStorage o en el estado global de la aplicación\nlocalStorage.setItem('token',token);// Redirigir al dashboard o a la página principal\nnavigate('/dashboard');};const handleBackToForm=()=>{setShowOtpVerification(false);};if(showOtpVerification){return/*#__PURE__*/_jsx(OTPVerification,{email:email,onBack:handleBackToForm,onSuccess:handleOtpSuccess});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(Title,{children:isLogin?'Iniciar sesión':'Crear cuenta'}),/*#__PURE__*/_jsx(Description,{children:isLogin?'Ingresa tus credenciales para acceder a tu cuenta.':'Crea una cuenta para comenzar a usar TuGood TuGo.'}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[!isLogin&&/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Nombre completo\",value:name,onChange:e=>setName(e.target.value),disabled:isLoading})}),/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"email\",placeholder:\"Correo electr\\xF3nico\",value:email,onChange:e=>setEmail(e.target.value),disabled:isLoading})}),!isLogin&&/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"Contrase\\xF1a\",value:password,onChange:e=>setPassword(e.target.value),disabled:isLoading})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:isLoading,children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{size:20,className:\"animate-spin\"}),\"Procesando...\"]}):isLogin?'Iniciar sesión':'Registrarse'})]}),/*#__PURE__*/_jsx(Footer,{children:isLogin?/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\xBFNo tienes una cuenta?\",' ',/*#__PURE__*/_jsx(LinkButton,{onClick:()=>navigate('/register'),children:\"Reg\\xEDstrate\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\xBFYa tienes una cuenta?\",' ',/*#__PURE__*/_jsx(LinkButton,{onClick:()=>navigate('/login'),children:\"Inicia sesi\\xF3n\"})]})})]})});};const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  min-height: 100vh;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background-color: #F9FAFB;\\n  padding: 2rem;\\n\"])));const FormContainer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  background: white;\\n  border-radius: 1rem;\\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\\n  padding: 2.5rem;\\n  width: 100%;\\n  max-width: 28rem;\\n\"])));const Title=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-size: 1.875rem;\\n  font-weight: 700;\\n  color: #111827;\\n  margin-bottom: 0.5rem;\\n  text-align: center;\\n\"])));const Description=styled.p(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  color: #6B7280;\\n  text-align: center;\\n  margin-bottom: 2rem;\\n\"])));const Form=styled.form(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  gap: 1.25rem;\\n\"])));const InputGroup=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  position: relative;\\n\"])));const InputIcon=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  left: 1rem;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  color: #9CA3AF;\\n\"])));const Input=styled.input(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 0.75rem 1rem 0.75rem 2.75rem;\\n  border: 1px solid #D1D5DB;\\n  border-radius: 0.5rem;\\n  font-size: 0.9375rem;\\n  transition: border-color 0.2s, box-shadow 0.2s;\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: #4F46E5;\\n    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);\\n  }\\n  \\n  &:disabled {\\n    background-color: #F3F4F6;\\n    cursor: not-allowed;\\n  }\\n\"])));const Button=styled.button(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  background-color: #4F46E5;\\n  color: white;\\n  font-weight: 500;\\n  padding: 0.75rem 1.5rem;\\n  border: none;\\n  border-radius: 0.5rem;\\n  font-size: 1rem;\\n  cursor: pointer;\\n  transition: background-color 0.2s;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 0.5rem;\\n  margin-top: 0.5rem;\\n  \\n  &:hover {\\n    background-color: #4338CA;\\n  }\\n  \\n  &:disabled {\\n    background-color: #A5B4FC;\\n    cursor: not-allowed;\\n  }\\n\"])));const Footer=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  margin-top: 1.5rem;\\n  text-align: center;\\n  color: #6B7280;\\n  font-size: 0.875rem;\\n\"])));const LinkButton=styled.button(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  background: none;\\n  border: none;\\n  color: #4F46E5;\\n  font-weight: 500;\\n  cursor: pointer;\\n  padding: 0.25rem 0.5rem;\\n  border-radius: 0.375rem;\\n  font-size: 0.875rem;\\n  \\n  &:hover {\\n    text-decoration: underline;\\n  }\\n\"])));export default AuthForm;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}