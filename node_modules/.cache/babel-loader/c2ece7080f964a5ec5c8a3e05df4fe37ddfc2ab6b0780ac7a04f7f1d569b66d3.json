{"ast":null,"code":"import _objectSpread from\"C:/Users/PERSONAL/Downloads/tugood tugo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{ArrowLeft,Clock,Package,Plus,Edit3,Trash2,Save,AlertCircle,CheckCircle}from'lucide-react';import{authAPI}from'../services/api';import'../styles/MerchantPanel.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MerchantPanel=_ref=>{let{user}=_ref;const navigate=useNavigate();const[activeTab,setActiveTab]=useState('horarios');const[horarios,setHorarios]=useState([]);const[productos,setProductos]=useState([]);const[loading,setLoading]=useState(false);const[showAddForm,setShowAddForm]=useState(false);// Estados para nuevo horario\nconst[nuevoHorario,setNuevoHorario]=useState({fecha:'',horaInicio:'',horaFin:'',productosDisponibles:10,descripcion:'Pack sorpresa del día'});// Verificar que el usuario sea comerciante\nuseEffect(()=>{const currentUser=user||authAPI.getCurrentUser();if(!currentUser||currentUser.tipo!=='comercio'){navigate('/main');}},[user,navigate]);// Cargar datos del comerciante\nuseEffect(()=>{loadMerchantData();},[]);const loadMerchantData=async()=>{setLoading(true);try{// Simular carga de horarios existentes\nconst horariosDemo=[{id:1,fecha:'2024-01-15',horaInicio:'14:00',horaFin:'16:00',productosDisponibles:8,productosVendidos:2,estado:'activo',descripcion:'Pack sorpresa del día'},{id:2,fecha:'2024-01-15',horaInicio:'18:00',horaFin:'20:00',productosDisponibles:15,productosVendidos:0,estado:'programado',descripcion:'Pack especial de cena'}];setHorarios(horariosDemo);}catch(error){console.error('Error cargando datos:',error);}finally{setLoading(false);}};const handleAddHorario=async()=>{if(!nuevoHorario.fecha||!nuevoHorario.horaInicio||!nuevoHorario.horaFin){alert('Por favor completa todos los campos obligatorios');return;}const horario=_objectSpread(_objectSpread({id:Date.now()},nuevoHorario),{},{productosVendidos:0,estado:'programado'});setHorarios([...horarios,horario]);setNuevoHorario({fecha:'',horaInicio:'',horaFin:'',productosDisponibles:10,descripcion:'Pack sorpresa del día'});setShowAddForm(false);alert('Horario agregado exitosamente');};const handleDeleteHorario=id=>{if(window.confirm('¿Estás seguro de eliminar este horario?')){setHorarios(horarios.filter(h=>h.id!==id));}};const getEstadoColor=estado=>{switch(estado){case'activo':return'#10b981';case'programado':return'#f59e0b';case'cerrado':return'#ef4444';default:return'#6b7280';}};const getEstadoText=horario=>{if(horario.productosVendidos>=horario.productosDisponibles){return'AGOTADO';}return horario.estado.toUpperCase();};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"merchant-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando panel de comerciante...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"merchant-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/main'),className:\"back-button\",children:/*#__PURE__*/_jsx(ArrowLeft,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-info\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Panel de Comerciante\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Gestiona tus horarios y productos\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel-tabs\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"tab \".concat(activeTab==='horarios'?'active':''),onClick:()=>setActiveTab('horarios'),children:[/*#__PURE__*/_jsx(Clock,{size:20}),\"Horarios\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab \".concat(activeTab==='franjas'?'active':''),onClick:()=>navigate('/merchant-slots'),children:[/*#__PURE__*/_jsx(Clock,{size:20}),\"Franjas Horarias\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab \".concat(activeTab==='productos'?'active':''),onClick:()=>setActiveTab('productos'),children:[/*#__PURE__*/_jsx(Package,{size:20}),\"Productos\"]})]}),activeTab==='horarios'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gesti\\xF3n de Horarios\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"add-button\",onClick:()=>setShowAddForm(!showAddForm),children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Nuevo Horario\"]})]}),showAddForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"add-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Nuevo Horario de Recogida\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nuevoHorario.fecha,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{fecha:e.target.value})),min:new Date().toISOString().split('T')[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Hora de Inicio\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:nuevoHorario.horaInicio,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{horaInicio:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Hora de Fin\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:nuevoHorario.horaFin,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{horaFin:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Productos Disponibles\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:\"100\",value:nuevoHorario.productosDisponibles,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{productosDisponibles:parseInt(e.target.value)}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group full-width\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ej: Pack sorpresa del d\\xEDa\",value:nuevoHorario.descripcion,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{descripcion:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddForm(false),className:\"cancel-button\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddHorario,className:\"save-button\",children:[/*#__PURE__*/_jsx(Save,{size:20}),\"Guardar Horario\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"horarios-list\",children:horarios.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Clock,{size:48}),/*#__PURE__*/_jsx(\"h3\",{children:\"No hay horarios programados\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Agrega tu primer horario de recogida\"})]}):horarios.map(horario=>/*#__PURE__*/_jsxs(\"div\",{className:\"horario-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"horario-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"horario-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:horario.descripcion}),/*#__PURE__*/_jsx(\"p\",{children:new Date(horario.fecha).toLocaleDateString('es-ES',{weekday:'long',year:'numeric',month:'long',day:'numeric'})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"estado-badge\",style:{backgroundColor:getEstadoColor(horario.estado)},children:getEstadoText(horario)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"horario-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(Clock,{size:16}),/*#__PURE__*/_jsxs(\"span\",{children:[horario.horaInicio,\" - \",horario.horaFin]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(Package,{size:16}),/*#__PURE__*/_jsxs(\"span\",{children:[horario.productosDisponibles-horario.productosVendidos,\" disponibles de \",horario.productosDisponibles]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(horario.productosVendidos/horario.productosDisponibles*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"horario-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"edit-button\",children:[/*#__PURE__*/_jsx(Edit3,{size:16}),\"Editar\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteHorario(horario.id),children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\"Eliminar\"]})]})]},horario.id))})]}),activeTab==='productos'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Gesti\\xF3n de Productos\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"coming-soon\",children:[/*#__PURE__*/_jsx(Package,{size:48}),/*#__PURE__*/_jsx(\"h3\",{children:\"Pr\\xF3ximamente\"}),/*#__PURE__*/_jsx(\"p\",{children:\"La gesti\\xF3n de productos estar\\xE1 disponible pronto\"})]})]})]})});};export default MerchantPanel;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}