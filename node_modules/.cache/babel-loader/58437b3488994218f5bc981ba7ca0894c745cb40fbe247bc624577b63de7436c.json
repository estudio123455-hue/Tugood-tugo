{"ast":null,"code":"import _objectSpread from\"C:/Users/PERSONAL/Downloads/tugood tugo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{ArrowLeft,Clock,Package,Plus,Edit3,Trash2,Save,AlertCircle,CheckCircle,User,BarChart3,Calendar,DollarSign,TrendingUp,MapPin}from'lucide-react';import{authAPI}from'../services/api';import'../styles/MerchantDashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MerchantDashboard=_ref=>{let{user,city}=_ref;const navigate=useNavigate();const[activeSection,setActiveSection]=useState('dashboard');const[horarios,setHorarios]=useState([]);const[loading,setLoading]=useState(false);const[showAddForm,setShowAddForm]=useState(false);const[stats,setStats]=useState({ventasHoy:12,ingresosSemana:450000,productosActivos:25,clientesNuevos:8});// Estados para nuevo horario\nconst[nuevoHorario,setNuevoHorario]=useState({fecha:'',horaInicio:'',horaFin:'',productosDisponibles:10,descripcion:'Pack sorpresa del día',precio:8000});// Verificar que el usuario sea comerciante\nuseEffect(()=>{const currentUser=user||authAPI.getCurrentUser();if(!currentUser||currentUser.tipo!=='comercio'){navigate('/main');}},[user,navigate]);// Cargar datos del comerciante\nuseEffect(()=>{loadMerchantData();},[]);const loadMerchantData=async()=>{setLoading(true);try{// Simular carga de horarios existentes\nconst horariosDemo=[{id:1,fecha:'2024-01-15',horaInicio:'14:00',horaFin:'16:00',productosDisponibles:8,productosVendidos:2,estado:'activo',descripcion:'Pack sorpresa del día',precio:8000},{id:2,fecha:'2024-01-15',horaInicio:'18:00',horaFin:'20:00',productosDisponibles:15,productosVendidos:0,estado:'programado',descripcion:'Pack especial de cena',precio:12000}];setHorarios(horariosDemo);}catch(error){console.error('Error cargando datos:',error);}finally{setLoading(false);}};const handleAddHorario=async()=>{if(!nuevoHorario.fecha||!nuevoHorario.horaInicio||!nuevoHorario.horaFin){alert('Por favor completa todos los campos obligatorios');return;}const horario=_objectSpread(_objectSpread({id:Date.now()},nuevoHorario),{},{productosVendidos:0,estado:'programado'});setHorarios([...horarios,horario]);setNuevoHorario({fecha:'',horaInicio:'',horaFin:'',productosDisponibles:10,descripcion:'Pack sorpresa del día',precio:8000});setShowAddForm(false);alert('Horario agregado exitosamente');};const handleDeleteHorario=id=>{if(window.confirm('¿Estás seguro de eliminar este horario?')){setHorarios(horarios.filter(h=>h.id!==id));}};const getEstadoColor=estado=>{switch(estado){case'activo':return'#10b981';case'programado':return'#f59e0b';case'cerrado':return'#ef4444';default:return'#6b7280';}};const getEstadoText=horario=>{if(horario.productosVendidos>=horario.productosDisponibles){return'AGOTADO';}return horario.estado.toUpperCase();};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"merchant-dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando dashboard...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"merchant-dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDFEA Dashboard Comerciante\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Bienvenido, \",(user===null||user===void 0?void 0:user.nombre)||'Comerciante']}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-info\",children:[/*#__PURE__*/_jsx(MapPin,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:(city===null||city===void 0?void 0:city.name)||'Bogotá'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-actions\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/profile'),className:\"profile-btn\",children:[/*#__PURE__*/_jsx(User,{size:20}),\"Perfil\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon sales\",children:/*#__PURE__*/_jsx(TrendingUp,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.ventasHoy}),/*#__PURE__*/_jsx(\"p\",{children:\"Ventas Hoy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon revenue\",children:/*#__PURE__*/_jsx(DollarSign,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",stats.ingresosSemana.toLocaleString()]}),/*#__PURE__*/_jsx(\"p\",{children:\"Ingresos Semana\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon products\",children:/*#__PURE__*/_jsx(Package,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.productosActivos}),/*#__PURE__*/_jsx(\"p\",{children:\"Productos Activos\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon customers\",children:/*#__PURE__*/_jsx(User,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.clientesNuevos}),/*#__PURE__*/_jsx(\"p\",{children:\"Clientes Nuevos\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-tabs\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"tab \".concat(activeSection==='dashboard'?'active':''),onClick:()=>setActiveSection('dashboard'),children:[/*#__PURE__*/_jsx(BarChart3,{size:20}),\"Dashboard\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab \".concat(activeSection==='horarios'?'active':''),onClick:()=>setActiveSection('horarios'),children:[/*#__PURE__*/_jsx(Clock,{size:20}),\"Horarios\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab \".concat(activeSection==='productos'?'active':''),onClick:()=>setActiveSection('productos'),children:[/*#__PURE__*/_jsx(Package,{size:20}),\"Productos\"]})]}),activeSection==='dashboard'&&/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Resumen de Ventas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-placeholder\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Gr\\xE1fico de ventas de la semana\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mock-chart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{height:'60%'}}),/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{height:'80%'}}),/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{height:'45%'}}),/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{height:'90%'}}),/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{height:'70%'}}),/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{height:'85%'}}),/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{height:'95%'}})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDD52 Pr\\xF3ximos Horarios\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-schedules\",children:horarios.slice(0,3).map(horario=>/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-time\",children:[horario.horaInicio,\" - \",horario.horaFin]}),/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-info\",children:[/*#__PURE__*/_jsx(\"span\",{children:horario.descripcion}),/*#__PURE__*/_jsxs(\"small\",{children:[horario.productosDisponibles-horario.productosVendidos,\" disponibles\"]})]})]},horario.id))})]})]})}),activeSection==='horarios'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gesti\\xF3n de Horarios\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"add-button\",onClick:()=>setShowAddForm(!showAddForm),children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Nuevo Horario\"]})]}),showAddForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"add-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Nuevo Horario de Recogida\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nuevoHorario.fecha,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{fecha:e.target.value})),min:new Date().toISOString().split('T')[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Hora de Inicio\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:nuevoHorario.horaInicio,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{horaInicio:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Hora de Fin\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:nuevoHorario.horaFin,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{horaFin:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Productos Disponibles\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:\"100\",value:nuevoHorario.productosDisponibles,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{productosDisponibles:parseInt(e.target.value)}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Precio por Pack (COP)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1000\",step:\"500\",value:nuevoHorario.precio,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{precio:parseInt(e.target.value)}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group full-width\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ej: Pack sorpresa del d\\xEDa\",value:nuevoHorario.descripcion,onChange:e=>setNuevoHorario(_objectSpread(_objectSpread({},nuevoHorario),{},{descripcion:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddForm(false),className:\"cancel-button\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddHorario,className:\"save-button\",children:[/*#__PURE__*/_jsx(Save,{size:20}),\"Guardar Horario\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"horarios-list\",children:horarios.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Clock,{size:48}),/*#__PURE__*/_jsx(\"h3\",{children:\"No hay horarios programados\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Agrega tu primer horario de recogida\"})]}):horarios.map(horario=>{var _horario$precio;return/*#__PURE__*/_jsxs(\"div\",{className:\"horario-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"horario-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"horario-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:horario.descripcion}),/*#__PURE__*/_jsx(\"p\",{children:new Date(horario.fecha).toLocaleDateString('es-ES',{weekday:'long',year:'numeric',month:'long',day:'numeric'})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"estado-badge\",style:{backgroundColor:getEstadoColor(horario.estado)},children:getEstadoText(horario)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"horario-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(Clock,{size:16}),/*#__PURE__*/_jsxs(\"span\",{children:[horario.horaInicio,\" - \",horario.horaFin]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(Package,{size:16}),/*#__PURE__*/_jsxs(\"span\",{children:[horario.productosDisponibles-horario.productosVendidos,\" disponibles de \",horario.productosDisponibles]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(DollarSign,{size:16}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",((_horario$precio=horario.precio)===null||_horario$precio===void 0?void 0:_horario$precio.toLocaleString())||'8,000',\" COP\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(horario.productosVendidos/horario.productosDisponibles*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"horario-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"edit-button\",children:[/*#__PURE__*/_jsx(Edit3,{size:16}),\"Editar\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteHorario(horario.id),children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\"Eliminar\"]})]})]},horario.id);})})]}),activeSection==='productos'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Gesti\\xF3n de Productos\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"coming-soon\",children:[/*#__PURE__*/_jsx(Package,{size:48}),/*#__PURE__*/_jsx(\"h3\",{children:\"Pr\\xF3ximamente\"}),/*#__PURE__*/_jsx(\"p\",{children:\"La gesti\\xF3n avanzada de productos estar\\xE1 disponible pronto\"})]})]})]})});};export default MerchantDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}