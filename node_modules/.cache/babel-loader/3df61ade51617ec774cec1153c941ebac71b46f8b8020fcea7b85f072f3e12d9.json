{"ast":null,"code":"import React,{useState}from'react';import{MapPin,Navigation,AlertCircle,CheckCircle,X}from'lucide-react';import'../styles/LocationPermissionRequest.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LocationPermissionRequest=_ref=>{let{onPermissionGranted,onPermissionDenied,onSkip}=_ref;const[isRequesting,setIsRequesting]=useState(false);const[error,setError]=useState(null);const requestLocation=async()=>{setIsRequesting(true);setError(null);try{// Solicitar ubicación\nconst position=await new Promise((resolve,reject)=>{if(!navigator.geolocation){reject(new Error('Tu navegador no soporta geolocalización'));return;}navigator.geolocation.getCurrentPosition(position=>resolve(position),error=>reject(error),{enableHighAccuracy:true,timeout:10000,maximumAge:60000});});// Éxito - llamar callback\nif(onPermissionGranted){onPermissionGranted(position);}}catch(error){console.error('Error obteniendo ubicación:',error);let errorMessage='No se pudo obtener tu ubicación. ';switch(error.code){case 1:// PERMISSION_DENIED\nerrorMessage='Permisos de ubicación denegados. Puedes habilitarlos en la configuración del navegador.';if(onPermissionDenied)onPermissionDenied(error);break;case 2:// POSITION_UNAVAILABLE\nerrorMessage='Tu ubicación no está disponible en este momento.';break;case 3:// TIMEOUT\nerrorMessage='Tiempo de espera agotado. Intenta de nuevo.';break;default:errorMessage='Error desconocido al obtener la ubicación.';break;}setError(errorMessage);}finally{setIsRequesting(false);}};const handleSkip=()=>{if(onSkip){onSkip();}};return/*#__PURE__*/_jsx(\"div\",{className:\"location-permission-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"location-permission-modal\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:handleSkip,disabled:isRequesting,children:/*#__PURE__*/_jsx(X,{size:20})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"floating-circle circle-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"floating-circle circle-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"floating-circle circle-3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location-icon\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-pulse\"}),/*#__PURE__*/_jsx(Navigation,{size:32})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDF1F \\xA1Descubre lo mejor cerca de ti!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"TuGood TuGo necesita tu ubicaci\\xF3n para mostrarte los comercios m\\xE1s cercanos y ofrecerte la mejor experiencia.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"benefits-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"benefit-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"benefit-icon\",children:/*#__PURE__*/_jsx(CheckCircle,{size:18})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDFEA Encuentra comercios cerca de ti\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"benefit-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"benefit-icon\",children:/*#__PURE__*/_jsx(CheckCircle,{size:18})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCCF Calcula distancias precisas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"benefit-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"benefit-icon\",children:/*#__PURE__*/_jsx(CheckCircle,{size:18})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDD14 Recibe notificaciones de ofertas cercanas\"})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16}),/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:requestLocation,disabled:isRequesting,className:\"btn-primary\",children:isRequesting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),\"Obteniendo ubicaci\\xF3n...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MapPin,{size:18}),\"\\u2728 Permitir ubicaci\\xF3n\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSkip,disabled:isRequesting,className:\"btn-secondary\",children:\"\\uD83D\\uDCCD Usar Chapinero por defecto\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"privacy-note\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"privacy-icon\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tu ubicaci\\xF3n solo se usa para mejorar tu experiencia y\",/*#__PURE__*/_jsx(\"strong\",{children:\" no se comparte con terceros\"}),\".\"]})]})]})});};export default LocationPermissionRequest;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}